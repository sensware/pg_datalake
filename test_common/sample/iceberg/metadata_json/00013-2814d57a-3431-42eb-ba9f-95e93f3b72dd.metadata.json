{
  "format-version" : 2,
  "table-uuid" : "94788861-556e-436e-ad2c-5255c265b7d8",
  "location" : "s3://cdwtestdatasets/tmp/spark_metadata/v1/public/complex_partitioned_table",
  "last-sequence-number" : 2,
  "last-updated-ms" : 1720595056962,
  "last-column-id" : 46,
  "current-schema-id" : 4,
  "schemas" : [ {
    "type" : "struct",
    "schema-id" : 0,
    "fields" : [ {
      "id" : 1,
      "name" : "id",
      "required" : true,
      "type" : "long",
      "doc" : "unique id"
    }, {
      "id" : 2,
      "name" : "user name",
      "required" : true,
      "type" : "string",
      "doc" : "user name with spaces"
    }, {
      "id" : 3,
      "name" : "data",
      "required" : false,
      "type" : "string",
      "doc" : "data column"
    }, {
      "id" : 4,
      "name" : "ts",
      "required" : false,
      "type" : "timestamptz"
    }, {
      "id" : 5,
      "name" : "metadata",
      "required" : false,
      "type" : {
        "type" : "map",
        "key-id" : 7,
        "key" : "string",
        "value-id" : 8,
        "value" : "string",
        "value-required" : false
      },
      "doc" : "metadata map"
    }, {
      "id" : 6,
      "name" : "complex_struct",
      "required" : false,
      "type" : {
        "type" : "struct",
        "fields" : [ {
          "id" : 9,
          "name" : "id",
          "required" : false,
          "type" : "long"
        }, {
          "id" : 10,
          "name" : "info",
          "required" : false,
          "type" : "string"
        } ]
      },
      "doc" : "complex nested struct"
    } ]
  }, {
    "type" : "struct",
    "schema-id" : 1,
    "identifier-field-ids" : [ 1, 2 ],
    "fields" : [ {
      "id" : 1,
      "name" : "id",
      "required" : true,
      "type" : "long",
      "doc" : "unique id"
    }, {
      "id" : 2,
      "name" : "user name",
      "required" : true,
      "type" : "string",
      "doc" : "user name with spaces"
    }, {
      "id" : 3,
      "name" : "data",
      "required" : false,
      "type" : "string",
      "doc" : "data column"
    }, {
      "id" : 4,
      "name" : "ts",
      "required" : false,
      "type" : "timestamptz"
    }, {
      "id" : 5,
      "name" : "metadata",
      "required" : false,
      "type" : {
        "type" : "map",
        "key-id" : 7,
        "key" : "string",
        "value-id" : 8,
        "value" : "string",
        "value-required" : false
      },
      "doc" : "metadata map"
    }, {
      "id" : 6,
      "name" : "complex_struct",
      "required" : false,
      "type" : {
        "type" : "struct",
        "fields" : [ {
          "id" : 9,
          "name" : "id",
          "required" : false,
          "type" : "long"
        }, {
          "id" : 10,
          "name" : "info",
          "required" : false,
          "type" : "string"
        } ]
      },
      "doc" : "complex nested struct"
    } ]
  }, {
    "type" : "struct",
    "schema-id" : 2,
    "identifier-field-ids" : [ 1, 2 ],
    "fields" : [ {
      "id" : 1,
      "name" : "id",
      "required" : true,
      "type" : "long",
      "doc" : "unique id"
    }, {
      "id" : 2,
      "name" : "user name",
      "required" : true,
      "type" : "string",
      "doc" : "user name with spaces"
    }, {
      "id" : 3,
      "name" : "data",
      "required" : false,
      "type" : "string",
      "doc" : "data column"
    }, {
      "id" : 4,
      "name" : "ts",
      "required" : false,
      "type" : "timestamptz"
    }, {
      "id" : 5,
      "name" : "metadata",
      "required" : false,
      "type" : {
        "type" : "map",
        "key-id" : 7,
        "key" : "string",
        "value-id" : 8,
        "value" : "string",
        "value-required" : false
      },
      "doc" : "metadata map"
    }, {
      "id" : 6,
      "name" : "complex_struct",
      "required" : false,
      "type" : {
        "type" : "struct",
        "fields" : [ {
          "id" : 9,
          "name" : "id",
          "required" : false,
          "type" : "long"
        }, {
          "id" : 10,
          "name" : "info",
          "required" : false,
          "type" : "string"
        } ]
      },
      "doc" : "complex nested struct"
    }, {
      "id" : 11,
      "name" : "new_column",
      "required" : false,
      "type" : "string",
      "doc" : "new_column docs with escape chars \";'."
    }, {
      "id" : 12,
      "name" : "points",
      "required" : false,
      "type" : {
        "type" : "map",
        "key-id" : 13,
        "key" : {
          "type" : "struct",
          "fields" : [ {
            "id" : 15,
            "name" : "x",
            "required" : false,
            "type" : "int"
          } ]
        },
        "value-id" : 14,
        "value" : {
          "type" : "struct",
          "fields" : [ {
            "id" : 16,
            "name" : "a",
            "required" : false,
            "type" : "int"
          } ]
        },
        "value-required" : false
      },
      "doc" : "map with struct keys and values"
    }, {
      "id" : 17,
      "name" : "point",
      "required" : false,
      "type" : {
        "type" : "struct",
        "fields" : [ {
          "id" : 18,
          "name" : "x",
          "required" : false,
          "type" : "double"
        }, {
          "id" : 19,
          "name" : "y",
          "required" : false,
          "type" : "double"
        } ]
      },
      "doc" : "struct with double fields"
    }, {
      "id" : 20,
      "name" : "points_arr",
      "required" : false,
      "type" : {
        "type" : "list",
        "element-id" : 21,
        "element" : {
          "type" : "struct",
          "fields" : [ {
            "id" : 22,
            "name" : "x",
            "required" : false,
            "type" : "double"
          }, {
            "id" : 23,
            "name" : "y",
            "required" : false,
            "type" : "double"
          } ]
        },
        "element-required" : false
      },
      "doc" : "array of structs"
    } ]
  }, {
    "type" : "struct",
    "schema-id" : 3,
    "identifier-field-ids" : [ 1, 2 ],
    "fields" : [ {
      "id" : 1,
      "name" : "id",
      "required" : true,
      "type" : "long",
      "doc" : "unique id"
    }, {
      "id" : 2,
      "name" : "user name",
      "required" : true,
      "type" : "string",
      "doc" : "user name with spaces"
    }, {
      "id" : 3,
      "name" : "data",
      "required" : false,
      "type" : "string",
      "doc" : "data column"
    }, {
      "id" : 4,
      "name" : "ts",
      "required" : false,
      "type" : "timestamptz"
    }, {
      "id" : 5,
      "name" : "metadata",
      "required" : false,
      "type" : {
        "type" : "map",
        "key-id" : 7,
        "key" : "string",
        "value-id" : 8,
        "value" : "string",
        "value-required" : false
      },
      "doc" : "metadata map"
    }, {
      "id" : 6,
      "name" : "complex_struct",
      "required" : false,
      "type" : {
        "type" : "struct",
        "fields" : [ {
          "id" : 9,
          "name" : "id",
          "required" : false,
          "type" : "long"
        }, {
          "id" : 10,
          "name" : "info",
          "required" : false,
          "type" : "string"
        } ]
      },
      "doc" : "complex nested struct"
    }, {
      "id" : 11,
      "name" : "new_column",
      "required" : false,
      "type" : "string",
      "doc" : "new_column docs with escape chars \";'."
    }, {
      "id" : 12,
      "name" : "points",
      "required" : false,
      "type" : {
        "type" : "map",
        "key-id" : 13,
        "key" : {
          "type" : "struct",
          "fields" : [ {
            "id" : 15,
            "name" : "x",
            "required" : false,
            "type" : "int"
          } ]
        },
        "value-id" : 14,
        "value" : {
          "type" : "struct",
          "fields" : [ {
            "id" : 16,
            "name" : "a",
            "required" : false,
            "type" : "int"
          } ]
        },
        "value-required" : false
      },
      "doc" : "map with struct keys and values"
    }, {
      "id" : 17,
      "name" : "point",
      "required" : false,
      "type" : {
        "type" : "struct",
        "fields" : [ {
          "id" : 18,
          "name" : "x",
          "required" : false,
          "type" : "double"
        }, {
          "id" : 19,
          "name" : "y",
          "required" : false,
          "type" : "double"
        } ]
      },
      "doc" : "struct with double fields"
    }, {
      "id" : 20,
      "name" : "points_arr",
      "required" : false,
      "type" : {
        "type" : "list",
        "element-id" : 21,
        "element" : {
          "type" : "struct",
          "fields" : [ {
            "id" : 22,
            "name" : "x",
            "required" : false,
            "type" : "double"
          }, {
            "id" : 23,
            "name" : "y",
            "required" : false,
            "type" : "double"
          }, {
            "id" : 24,
            "name" : "z",
            "required" : false,
            "type" : "double",
            "doc" : "adding nested element to array"
          } ]
        },
        "element-required" : false
      },
      "doc" : "array of structs"
    } ]
  }, {
    "type" : "struct",
    "schema-id" : 4,
    "identifier-field-ids" : [ 1, 2 ],
    "fields" : [ {
      "id" : 1,
      "name" : "id",
      "required" : true,
      "type" : "long",
      "doc" : "unique id"
    }, {
      "id" : 2,
      "name" : "user name",
      "required" : true,
      "type" : "string",
      "doc" : "user name with spaces"
    }, {
      "id" : 3,
      "name" : "data",
      "required" : false,
      "type" : "string",
      "doc" : "data column"
    }, {
      "id" : 4,
      "name" : "ts",
      "required" : false,
      "type" : "timestamptz"
    }, {
      "id" : 5,
      "name" : "metadata",
      "required" : false,
      "type" : {
        "type" : "map",
        "key-id" : 7,
        "key" : "string",
        "value-id" : 8,
        "value" : "string",
        "value-required" : false
      },
      "doc" : "metadata map"
    }, {
      "id" : 6,
      "name" : "complex_struct",
      "required" : false,
      "type" : {
        "type" : "struct",
        "fields" : [ {
          "id" : 9,
          "name" : "id",
          "required" : false,
          "type" : "long"
        }, {
          "id" : 10,
          "name" : "info",
          "required" : false,
          "type" : "string"
        } ]
      },
      "doc" : "complex nested struct"
    }, {
      "id" : 11,
      "name" : "new_column",
      "required" : false,
      "type" : "string",
      "doc" : "new_column docs with escape chars \";'."
    }, {
      "id" : 12,
      "name" : "points",
      "required" : false,
      "type" : {
        "type" : "map",
        "key-id" : 13,
        "key" : {
          "type" : "struct",
          "fields" : [ {
            "id" : 15,
            "name" : "x",
            "required" : false,
            "type" : "int"
          } ]
        },
        "value-id" : 14,
        "value" : {
          "type" : "struct",
          "fields" : [ {
            "id" : 16,
            "name" : "a",
            "required" : false,
            "type" : "int"
          } ]
        },
        "value-required" : false
      },
      "doc" : "map with struct keys and values"
    }, {
      "id" : 17,
      "name" : "point",
      "required" : false,
      "type" : {
        "type" : "struct",
        "fields" : [ {
          "id" : 18,
          "name" : "x",
          "required" : false,
          "type" : "double"
        }, {
          "id" : 19,
          "name" : "y",
          "required" : false,
          "type" : "double"
        } ]
      },
      "doc" : "struct with double fields"
    }, {
      "id" : 20,
      "name" : "points_arr",
      "required" : false,
      "type" : {
        "type" : "list",
        "element-id" : 21,
        "element" : {
          "type" : "struct",
          "fields" : [ {
            "id" : 22,
            "name" : "x",
            "required" : false,
            "type" : "double"
          }, {
            "id" : 23,
            "name" : "y",
            "required" : false,
            "type" : "double"
          }, {
            "id" : 24,
            "name" : "z",
            "required" : false,
            "type" : "double",
            "doc" : "adding nested element to array"
          } ]
        },
        "element-required" : false
      },
      "doc" : "array of structs"
    }, {
      "id" : 25,
      "name" : "user_activity",
      "required" : false,
      "type" : {
        "type" : "struct",
        "fields" : [ {
          "id" : 26,
          "name" : "login",
          "required" : false,
          "type" : {
            "type" : "struct",
            "fields" : [ {
              "id" : 28,
              "name" : "timestamp",
              "required" : false,
              "type" : "timestamptz"
            }, {
              "id" : 29,
              "name" : "location",
              "required" : false,
              "type" : "string"
            }, {
              "id" : 30,
              "name" : "device",
              "required" : false,
              "type" : {
                "type" : "struct",
                "fields" : [ {
                  "id" : 31,
                  "name" : "type",
                  "required" : false,
                  "type" : "string"
                }, {
                  "id" : 32,
                  "name" : "os",
                  "required" : false,
                  "type" : "string"
                }, {
                  "id" : 33,
                  "name" : "browser",
                  "required" : false,
                  "type" : {
                    "type" : "struct",
                    "fields" : [ {
                      "id" : 34,
                      "name" : "name",
                      "required" : false,
                      "type" : "string"
                    }, {
                      "id" : 35,
                      "name" : "version",
                      "required" : false,
                      "type" : "string"
                    } ]
                  }
                } ]
              }
            } ]
          }
        }, {
          "id" : 27,
          "name" : "actions",
          "required" : false,
          "type" : {
            "type" : "map",
            "key-id" : 36,
            "key" : "string",
            "value-id" : 37,
            "value" : {
              "type" : "list",
              "element-id" : 38,
              "element" : {
                "type" : "struct",
                "fields" : [ {
                  "id" : 39,
                  "name" : "timestamp",
                  "required" : false,
                  "type" : "timestamptz"
                }, {
                  "id" : 40,
                  "name" : "metadata",
                  "required" : false,
                  "type" : {
                    "type" : "map",
                    "key-id" : 42,
                    "key" : "string",
                    "value-id" : 43,
                    "value" : "string",
                    "value-required" : false
                  }
                }, {
                  "id" : 41,
                  "name" : "additional_info",
                  "required" : false,
                  "type" : {
                    "type" : "struct",
                    "fields" : [ {
                      "id" : 44,
                      "name" : "notes",
                      "required" : false,
                      "type" : "string"
                    }, {
                      "id" : 45,
                      "name" : "tags",
                      "required" : false,
                      "type" : {
                        "type" : "list",
                        "element-id" : 46,
                        "element" : "string",
                        "element-required" : false
                      }
                    } ]
                  }
                } ]
              },
              "element-required" : false
            },
            "value-required" : false
          }
        } ]
      },
      "doc" : "user activity with nested structs, maps, and lists"
    } ]
  } ],
  "default-spec-id" : 1,
  "partition-specs" : [ {
    "spec-id" : 0,
    "fields" : [ {
      "name" : "id_bucket",
      "transform" : "bucket[10]",
      "source-id" : 1,
      "field-id" : 1000
    }, {
      "name" : "ts_day",
      "transform" : "day",
      "source-id" : 4,
      "field-id" : 1001
    }, {
      "name" : "user name_bucket",
      "transform" : "bucket[5]",
      "source-id" : 2,
      "field-id" : 1002
    }, {
      "name" : "data_trunc",
      "transform" : "truncate[15]",
      "source-id" : 3,
      "field-id" : 1003
    } ]
  }, {
    "spec-id" : 1,
    "fields" : [ {
      "name" : "id_bucket",
      "transform" : "bucket[10]",
      "source-id" : 1,
      "field-id" : 1000
    }, {
      "name" : "ts_day",
      "transform" : "day",
      "source-id" : 4,
      "field-id" : 1001
    }, {
      "name" : "user name_bucket",
      "transform" : "bucket[5]",
      "source-id" : 2,
      "field-id" : 1002
    }, {
      "name" : "data_trunc",
      "transform" : "truncate[15]",
      "source-id" : 3,
      "field-id" : 1003
    }, {
      "name" : "ts_bucket",
      "transform" : "bucket[4]",
      "source-id" : 4,
      "field-id" : 1004
    } ]
  } ],
  "last-partition-id" : 1004,
  "default-sort-order-id" : 2,
  "sort-orders" : [ {
    "order-id" : 0,
    "fields" : [ ]
  }, {
    "order-id" : 1,
    "fields" : [ {
      "transform" : "identity",
      "source-id" : 4,
      "direction" : "desc",
      "null-order" : "nulls-last"
    }, {
      "transform" : "identity",
      "source-id" : 1,
      "direction" : "asc",
      "null-order" : "nulls-first"
    } ]
  }, {
    "order-id" : 2,
    "fields" : [ {
      "transform" : "identity",
      "source-id" : 1,
      "direction" : "asc",
      "null-order" : "nulls-first"
    }, {
      "transform" : "identity",
      "source-id" : 4,
      "direction" : "asc",
      "null-order" : "nulls-first"
    } ]
  } ],
  "properties" : {
    "owner" : "onderkalaci",
    "test" : "data",
    "write.format.default" : "parquet",
    "write.parquet.compression-codec" : "zstd",
    "write.upsert.enabled" : "true",
    "comment" : "A table comment with escape chars \";'.",
    "write.target-file-size-bytes" : "536870912",
    "write.distribution-mode" : "none",
    "\"complex-key\"" : "\"yoi ur\"",
    "key" : "value",
    "commit.manifest.min-count-to-merge" : "5",
    "read.split.target-size" : "268435456"
  },
  "current-snapshot-id" : -1,
  "refs" : {
    "audit-branch-2" : {
      "snapshot-id" : 6172606033113047893,
      "type" : "branch"
    },
    "audit-branch" : {
      "snapshot-id" : 3125026437050804592,
      "type" : "branch"
    },
    "audit-branch2" : {
      "snapshot-id" : 3125026437050804592,
      "type" : "branch",
      "min-snapshots-to-keep" : 3,
      "max-snapshot-age-ms" : 172800000,
      "max-ref-age-ms" : 2592000000
    }
  },
  "snapshots" : [ {
    "sequence-number" : 1,
    "snapshot-id" : 3125026437050804592,
    "timestamp-ms" : 1720594668442,
    "summary" : {
      "operation" : "append",
      "changed-partition-count" : "0",
      "total-records" : "0",
      "total-files-size" : "0",
      "total-data-files" : "0",
      "total-delete-files" : "0",
      "total-position-deletes" : "0",
      "total-equality-deletes" : "0"
    },
    "manifest-list" : "s3://cdwtestdatasets/tmp/spark_metadata/v1/public/complex_partitioned_table/metadata/snap-3125026437050804592-1-322776fd-f7e1-4844-b3ad-89f5d1335198.avro",
    "schema-id" : 3
  }, {
    "sequence-number" : 2,
    "snapshot-id" : 6172606033113047893,
    "timestamp-ms" : 1720594673409,
    "summary" : {
      "operation" : "append",
      "changed-partition-count" : "0",
      "total-records" : "0",
      "total-files-size" : "0",
      "total-data-files" : "0",
      "total-delete-files" : "0",
      "total-position-deletes" : "0",
      "total-equality-deletes" : "0"
    },
    "manifest-list" : "s3://cdwtestdatasets/tmp/spark_metadata/v1/public/complex_partitioned_table/metadata/snap-6172606033113047893-1-6919df0d-3924-4e2e-b97c-a1da8e126d72.avro",
    "schema-id" : 3
  } ],
  "statistics" : [ ],
  "snapshot-log" : [ ],
  "metadata-log" : [ {
    "timestamp-ms" : 1720594602494,
    "metadata-file" : "s3://cdwtestdatasets/tmp/spark_metadata/v1/public/complex_partitioned_table/metadata/00000-f5215865-a9a4-408e-8b35-e7200e491267.metadata.json"
  }, {
    "timestamp-ms" : 1720594612088,
    "metadata-file" : "s3://cdwtestdatasets/tmp/spark_metadata/v1/public/complex_partitioned_table/metadata/00001-4ac9bfb2-2bba-4dcb-8460-c21529e831be.metadata.json"
  }, {
    "timestamp-ms" : 1720594618408,
    "metadata-file" : "s3://cdwtestdatasets/tmp/spark_metadata/v1/public/complex_partitioned_table/metadata/00002-07bee3ca-70c3-4ef4-8e5e-debc2695825f.metadata.json"
  }, {
    "timestamp-ms" : 1720594622992,
    "metadata-file" : "s3://cdwtestdatasets/tmp/spark_metadata/v1/public/complex_partitioned_table/metadata/00003-be380062-02be-4fcd-a907-d36ca3814820.metadata.json"
  }, {
    "timestamp-ms" : 1720594627837,
    "metadata-file" : "s3://cdwtestdatasets/tmp/spark_metadata/v1/public/complex_partitioned_table/metadata/00004-3dad9ca9-82bf-4c48-b70f-00e1162ef0f2.metadata.json"
  }, {
    "timestamp-ms" : 1720594634897,
    "metadata-file" : "s3://cdwtestdatasets/tmp/spark_metadata/v1/public/complex_partitioned_table/metadata/00005-cbf449a3-490a-461d-95ba-b450ef2f9fe2.metadata.json"
  }, {
    "timestamp-ms" : 1720594641172,
    "metadata-file" : "s3://cdwtestdatasets/tmp/spark_metadata/v1/public/complex_partitioned_table/metadata/00006-488badf4-f21e-4f5d-ae7d-4964df9d5fb8.metadata.json"
  }, {
    "timestamp-ms" : 1720594651165,
    "metadata-file" : "s3://cdwtestdatasets/tmp/spark_metadata/v1/public/complex_partitioned_table/metadata/00007-cc879a31-d62c-4436-81cd-0f02ef3fe420.metadata.json"
  }, {
    "timestamp-ms" : 1720594656265,
    "metadata-file" : "s3://cdwtestdatasets/tmp/spark_metadata/v1/public/complex_partitioned_table/metadata/00008-d51626d8-3476-4cc0-b927-a73ea244e1f9.metadata.json"
  }, {
    "timestamp-ms" : 1720594660538,
    "metadata-file" : "s3://cdwtestdatasets/tmp/spark_metadata/v1/public/complex_partitioned_table/metadata/00009-a468d2e0-7685-4fd9-9edf-a9996ff42596.metadata.json"
  }, {
    "timestamp-ms" : 1720594668442,
    "metadata-file" : "s3://cdwtestdatasets/tmp/spark_metadata/v1/public/complex_partitioned_table/metadata/00010-cdb4798c-3aaa-4285-a53a-09f0b6187ddc.metadata.json"
  }, {
    "timestamp-ms" : 1720594673409,
    "metadata-file" : "s3://cdwtestdatasets/tmp/spark_metadata/v1/public/complex_partitioned_table/metadata/00011-07f3edda-6398-4143-a293-17b432424661.metadata.json"
  }, {
    "timestamp-ms" : 1720594890870,
    "metadata-file" : "s3://cdwtestdatasets/tmp/spark_metadata/v1/public/complex_partitioned_table/metadata/00012-05cc85ab-b7ea-40b6-894b-8b64d30e4959.metadata.json"
  } ]
}